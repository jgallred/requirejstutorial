define("models/container",["underscore","backbone"],function(e,t){var n=t.Model.extend({urlRoot:"models/container",initialize:function(){},defaults:function(){return{name:"New Container",position:0,container_id:null}},addToContainer:function(e,t){if(this.id&&this.id==e)return;this.set({container_id:e,position:t})},removeFromContainer:function(){this.set({container_id:null})},changePosition:function(e){this.set({position:e})}});return n}),define("collections/containers",["underscore","backbone","models/container"],function(e,t,n){var r=t.Collection.extend({url:"models/container",model:n,comparator:function(e){return e.get("position")}});return r}),define("models/item",["underscore","backbone"],function(e,t){var n=t.Model.extend({urlRoot:"models/item",defaults:function(){return{name:"New Item",description:"",position:0,container_id:null}},addToContainer:function(e,t){this.set({container_id:e,position:t})},removeFromContainer:function(){this.set({container_id:null})}});return n}),define("collections/items",["underscore","backbone","models/item"],function(e,t,n){var r=t.Collection.extend({url:"models/item",model:n,comparator:function(e){return e.get("position")}});return r}),define("endpoints/organizer/datastore",["backbone","collections/containers","collections/items"],function(e,t,n){var r={containers:new t,items:new n};return r.ops={getElementsForContainer:function(t){var n=r.items.where({container_id:t.id}),i=r.containers.where({container_id:t.id}),s=new e.Collection;return s.comparator=function(e){return e.get("position")},s.add(n),s.add(i),s},getRootContainers:function(){var t=r.containers.where({container_id:null}),n=new e.Collection;return n.comparator=function(e){return e.get("position")},n.add(t),n}},r}),define("text!tpls/item.html",[],function(){return'<div>\r\n	<div class="btn-toolbar">\r\n		<div class="btn-group pull-right">\r\n			<a class="btn btn-mini edit_item"><i class="icon-pencil"></i></a>\r\n			<a class="btn btn-mini delete_item"><i class="icon-trash"></i></a>\r\n		</div>\r\n	</div>\r\n	<div class="name">{{name}}</div>\r\n</div>'}),define("text!tpls/container.html",[],function(){return'<div>\r\n    <div class="btn-toolbar">\r\n        <div class="btn-group pull-right">\r\n            <a class="btn btn-mini edit_container"><i class="icon-pencil"></i></a>\r\n            <a class="btn btn-mini delete_container"><i class="icon-trash"></i></a>\r\n            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><i class="icon-plus"></i></a>\r\n            <ul class="dropdown-menu">\r\n                <li><a class="add_container">Container</a></li>\r\n                <li><a class="add_item">Item</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="name">{{name}}</div>\r\n</div>\r\n<ul class="sortable">\r\n</ul>'}),define("views/ContainerView",["jquery","underscore","backbone","endpoints/organizer/datastore","views/ItemView","models/item","models/container","text!tpls/container.html"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({template:Handlebars.compile(u),tagName:"li",attributes:function(){return{"class":"a_container"}},events:{"click > div .edit_container":"editContainer","click > div .delete_container":"deleteContainer","click > div .add_container":"addContainer","click > div .add_item":"addItem"},initialize:function(){this.model.on("destroy",this.remove,this),this.model.on("change:name",this.renderName,this)},render:function(){this.$el.html(this.template(this.model.toJSON()));var e=r.ops.getElementsForContainer(this.model),t=this;return e.forEach(function(e){e instanceof s?t.$(">ul").append((new i({model:e})).render().$el):t.$(">ul").append((new a({model:e})).render().$el)}),this.$("> ul.sortable").sortable({placeholder:"ui-state-highlight",connectWith:".sortable"}).disableSelection(),this},renderName:function(){this.$("> div > .name").text(this.model.get("name"))},editContainer:function(){alert("TODO Edit Container")},deleteContainer:function(){alert("TODO Destroy Container")},addContainer:function(){alert("TODO Add Container")},addItem:function(){alert("TODO Add Item")}});return a}),define("views/RootView",["backbone","views/ContainerView","endpoints/organizer/datastore"],function(e,t,n){var r=e.View.extend({el:".main",initialize:function(){},render:function(){var e=this;return this.collection.forEach(function(n){e.$("ul.root").append((new t({model:n})).render().$el)}),$("ul.root").sortable({placeholder:"ui-state-highlight",connectWith:".sortable"}).disableSelection(),this}});return r}),define("endpoints/organizer/app",["views/RootView","./datastore"],function(e,t){var n={init:function(){var n=t.containers.where({container_id:null}),r=new e({collection:n});$(".wrapper").append(r.render().$el)},datastore:t};return n});